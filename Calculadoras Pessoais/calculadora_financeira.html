<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Financeira - Hikari Wasabi</title>
</head>
<body>
    
    <h1>Calculadora Financeira</h1>

    Insira a área total de plantil (m²) por safra: <br>
    <input type="number" placeholder="Ex: 150" id="input_areaSafra">

    <br><br>

    Insira a quantidade de pés de wasabi por m²: <br>
    <input type="number" placeholder="Ex: 3" id="input_qtdPes">

    <br><br>

    Insira o faturamento médio por safra (R$): <br>
    <input type="number" placeholder="Ex: 2500000" id="input_fatMedio">

    <br><br>

    Insira o preço por quilograma de wasabi (R$): <br>
    <input type="number" placeholder="Ex: 6000" id="input_quiloWasabi">

    <br><br>

    <input type="button" onclick="calcula()" value="Simular">

    <br><br>

    <div id="div_atual"></div> <br>
    <div id="div_projeto"></div>
    
</body>
</html>

<script>

    function calcula() {
        // Pegando os valores dentro da função
        var area_safra              = Number(input_areaSafra.value);
        var pes_safra               = Number(input_qtdPes.value);
        var faturamento             = Number(input_fatMedio.value);
        var preco_kg                = Number(input_quiloWasabi.value);


        // Cálculos geral
        var pes_total               = pes_safra * area_safra;                                         // Total de pés de wasabi por safra
        var faturamento_ideal       = pes_total * preco_kg;                                           // Faturamento sem perdas

        // Cálculos atual
        var efetivo_pe              = faturamento / pes_total;                                        // Valor real por pé de wasabi
        var wasabis_perdidos        = pes_total - ((faturamento * pes_total) / faturamento_ideal)     // Quantidade de wasabis perdidos
        var faturamento_perda       = faturamento_ideal - faturamento                                 // Cálculo de perdas de faturamento

        // Cálculo com projeto
        var was_perdidos_proj       = wasabis_perdidos - (wasabis_perdidos / 1.5)                     // Quantidade de wasabis perdidos pós-projeto
        var faturamento_proj        = pes_total * (faturamento / (pes_total - was_perdidos_proj))     // Faturamento após o projeto
        var efetivo_pe_proj         = faturamento_proj / pes_total                                    // Valor efetivo por pé de wasabi
        var faturamento_perda_proj  = was_perdidos_proj * efetivo_pe                                  // Perdas de faturamento após o projeto


        // Confirmação
        if (faturamento > faturamento_ideal) {
            div_atual.innerHTML = `Erro: insira os dados novamente!`
            div_projeto.innerHTML = ``
            alert('Atenção: faturamento inválido!')

            input_fatMedio.value = ''
        }

        else {

        // Exibir resultados pré-projeto
        div_atual.innerHTML =
        `<h2>Resultados antes da implementação do sistema</h2>

        <h3>Wasabi</h3>
        Wasabi por safra: ${pes_total.toFixed(0)} (média de unidades)<br> 
        Total de wasabis perdidos: ${wasabis_perdidos.toFixed(0)} (média de unidades)<br>

        <h3>Faturamento</h3>
        Faturamento ideal: R$${faturamento_ideal.toFixed(2)}<br>
        Faturamento real: R$${faturamento.toFixed(2)}<br>
        Perdas de faturamento: R$${faturamento_perda.toFixed(2)}<br>
        
        <h3>Valores</h3>
        Preço ideal do wasabi: R$${preco_kg.toFixed(2)} p/ kg<br>
        Preço real pós-perdas: R$${efetivo_pe.toFixed(2)} p/ kg<br><br>
        `;


        // Exibir resultados pós-projeto
        div_projeto.innerHTML =
        `<h2>Resultados após implementação do sistema</h2>
        <h3>Wasabi</h3>
        Wasabi por safra: ${pes_total.toFixed(0)} (média de unidades)<br>
        Total de wasabis perdidos: ${was_perdidos_proj.toFixed(0)} (média de unidades)<br>
        
        <h3>Faturamento</h3>
        Faturamento ideal: R$${faturamento_ideal.toFixed(2)}<br>
        Faturamento atingido: R$${faturamento_proj.toFixed(2)}<br>
        Perdas de faturamento: R$${faturamento_perda_proj.toFixed(2)}<br>
        
        <h3>Valores</h3>
        Preço ideal do wasabi: R$${preco_kg.toFixed(2)} p/ kg<br>
        Preço real pós-perdas: R$${efetivo_pe_proj.toFixed(2)} p/ kg<br>
        `;
        }
    }

</script>
